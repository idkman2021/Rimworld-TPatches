<?xml version="1.0" encoding="utf-8"?>

<Patch>
    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>carnap2.TPatches</modId>
        <key>DocWorld_DesignationCategories</key>
        <defaultValue>true</defaultValue>
        <caseTrue>

            <Operation Class="XmlExtensions.OptionalPatch">
                <modId>carnap2.TPatches</modId>
                <key>DocWorld_DesignationCategoriesCulinary</key>
                <defaultValue>true</defaultValue>
                <caseTrue>

                    <Operation Class="PatchOperationAdd">
                        <xpath>/Defs</xpath>
                        <value>

                            <DesignationCategoryDef>
                                <defName>DZ_Culinary</defName>
                                <label>Culinary</label>
                                <description>Cooking and fermenting.</description>
                                <order>590</order>
                                <specialDesignatorClasses>
                                    <li>Designator_Cancel</li>
                                    <li>Designator_Deconstruct</li>
                                    <li>Designator_Uninstall</li>
                                </specialDesignatorClasses>
                            </DesignationCategoryDef>

                        </value>
                    </Operation>

                    <Operation Class="XmlExtensions.StopwatchStart" />
                    <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                        <xpath>Defs/ThingDef[designationCategory][
                            contains(label, "stove") or 
                            contains(label, "Stove") or 
                            contains(@Name, "stove") or 
                            contains(@Name, "Stove") or
                            contains(label, "ferment") or 
                            contains(label, "Ferment") or 
                            contains(@Name, "ferment") or 
                            contains(@Name, "Ferment") or 
                            contains(label, "nutrient") or 
                            contains(label, "Nutrient") or 
                            contains(@Name, "nutrient") or 
                            contains(@Name, "Nutrient") or 
                            contains(label, "butcher") or 
                            contains(label, "Butcher") or 
                            contains(@Name, "butcher") or 
                            contains(@Name, "Butcher")]</xpath>
                        <value>
                            <designationCategory Inherit="False">DZ_Culinary</designationCategory>
                        </value>
                    </Operation>
                    <Operation Class="XmlExtensions.StopwatchStop" />

                </caseTrue>
            </Operation>

            <Operation Class="XmlExtensions.OptionalPatch">
                <modId>carnap2.TPatches</modId>
                <key>DocWorld_DesignationCategoriesHusbandry</key>
                <defaultValue>true</defaultValue>
                <caseTrue>

                    <Operation Class="PatchOperationAdd">
                        <xpath>/Defs</xpath>
                        <value>

                            <DesignationCategoryDef>
                                <defName>DZ_Husbandry</defName>
                                <label>Husbandry</label>
                                <description>For all your agricultural and livestock needs.</description>
                                <order>580</order>
                                <specialDesignatorClasses>
                                    <li>Designator_Cancel</li>
                                    <li>Designator_Deconstruct</li>
                                    <li>Designator_Uninstall</li>
                                    <li>Designator_SmoothSurface</li>
                                    <li>Designator_RemoveFloor</li>
                                </specialDesignatorClasses>
                            </DesignationCategoryDef>

                        </value>
                    </Operation>

                    <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                        <xpath>Defs/ThingDef[designationCategory][
                            contains(label, "hydroponic") or 
                            contains(label, "sun") or 
                            contains(label, "Hydroponic") or 
                            contains(label, "Sun") or 
                            contains(@Name, "hydroponic") or 
                            contains(@Name, "sun") or 
                            contains(@Name, "Hydroponic") or 
                            contains(@Name, "Sun")
                            ]</xpath>
                        <value>
                            <designationCategory Inherit="False">DZ_Husbandry</designationCategory>
                        </value>
                    </Operation>

                </caseTrue>
            </Operation>

            <!--
            <Operation Class="XmlExtensions.OptionalPatch">
                <modId>carnap2.TPatches</modId>
                <key>DocWorld_DesignationCategoriesBeds</key>
                <defaultValue>true</defaultValue>
                <caseTrue>

                    <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                        <xpath>Defs/ThingDef[designationCategory][
                            contains(label, "sleeping") or 
                            contains(label, "Sleeping") or 
                            contains(@Name, "sleeping") or 
                            contains(@Name, "Sleeping")]</xpath>
                        <value>
                            <designationCategory Inherit="False">DZ_Beds</designationCategory>
                        </value>
                    </Operation>

                </caseTrue>
            </Operation>
        -->
            <Operation Class="XmlExtensions.OptionalPatch">
                <modId>carnap2.TPatches</modId>
                <key>DocWorld_DesignationCategoriesStorage</key>
                <defaultValue>true</defaultValue>
                <caseTrue>

                    <Operation Class="PatchOperationAdd">
                        <xpath>/Defs</xpath>
                        <value>

                            <DesignationCategoryDef>
                                <defName>DZ_Storage</defName>
                                <label>Storage</label>
                                <description>Furniture that can store items.</description>
                                <order>470</order>
                                <specialDesignatorClasses>
                                    <li>Designator_Cancel</li>
                                    <li>Designator_Deconstruct</li>
                                    <li>Designator_Uninstall</li>
                                </specialDesignatorClasses>
                            </DesignationCategoryDef>

                        </value>
                    </Operation>

                    <Operation Class="XmlExtensions.FindMod">
                        <mods>
                            <li>LWM's Deep Storage</li>
                        </mods>
                        <caseFalse>

                            <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                                <xpath>Defs/ThingDef[designationCategory][
                                contains(label, "shelf") or 
                                contains(label, "Shelf") or 
                                contains(@Name, "shelf") or 
                                contains(@Name, "Shelf")]</xpath>
                                <value>
                                    <designationCategory Inherit="False">DZ_Storage</designationCategory>
                                </value>
                            </Operation>


                        </caseFalse>
                    </Operation>
                </caseTrue>
            </Operation>

            <Operation Class="XmlExtensions.OptionalPatch">
                <modId>carnap2.TPatches</modId>
                <key>DocWorld_DesignationCategoriesLighting</key>
                <defaultValue>true</defaultValue>
                <caseTrue>

                    <Operation Class="PatchOperationAdd">
                        <xpath>/Defs</xpath>
                        <value>

                            <DesignationCategoryDef>
                                <defName>DZ_Lighting</defName>
                                <label>Lighting</label>
                                <description>Illumination.</description>
                                <order>480</order>
                                <specialDesignatorClasses>
                                    <li>Designator_Cancel</li>
                                    <li>Designator_Deconstruct</li>
                                    <li>Designator_Uninstall</li>
                                </specialDesignatorClasses>
                            </DesignationCategoryDef>


                        </value>
                    </Operation>

                    <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                        <xpath>Defs/ThingDef[designationCategory][
                        contains(label, "lamp") or 
                        contains(label, "torch") or 
                        contains(label, "Lamp") or 
                        contains(label, "Torch") or 
                        contains(@Name, "lamp") or 
                        contains(@Name, "torch") or 
                        contains(@Name, "Lamp") or 
                        contains(@Name, "Torch")]</xpath>
                        <value>
                            <designationCategory Inherit="False">DZ_Lighting</designationCategory>
                        </value>
                    </Operation>

                </caseTrue>
            </Operation>

            <Operation Class="XmlExtensions.OptionalPatch">
                <modId>carnap2.TPatches</modId>
                <key>DocWorld_DesignationCategoriesSpots</key>
                <defaultValue>true</defaultValue>
                <caseTrue>

                    <Operation Class="PatchOperationAdd">
                        <xpath>/Defs</xpath>
                        <value>

                            <DesignationCategoryDef>
                                <defName>NQoL_Spots</defName> <!-- compat with niilos qol -->
                                <label>Spots</label>
                                <description>Spots.</description>
                                <order>50</order>
                                <specialDesignatorClasses>
                                    <li>Designator_Cancel</li>
                                    <li>Designator_Deconstruct</li>
                                </specialDesignatorClasses>
                            </DesignationCategoryDef>

                        </value>
                    </Operation>


                </caseTrue>
            </Operation>


        </caseTrue>
        <caseFalse />
    </Operation>

</Patch>