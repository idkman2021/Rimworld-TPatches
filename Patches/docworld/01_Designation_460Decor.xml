<?xml version="1.0" encoding="utf-8"?>

<!--
    This file is under the Gnu General Public License version 3, see https://www.gnu.org/licenses/gpl-3.0.txt for more information.
-->

<Patch>

    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>carnap2.TPatches</modId>
        <key>DocWorld_DesignationCategories</key>
        <defaultValue>true</defaultValue>
        <caseTrue>
            <Operation Class="XmlExtensions.OptionalPatch">
                <modId>carnap2.TPatches</modId>
                <key>DocWorld_DesignationCategoriesDecor</key>
                <defaultValue>true</defaultValue>
                <caseTrue>

                    <Operation Class="PatchOperationAdd">
                        <xpath>/Defs</xpath>
                        <value>

                            <DesignationCategoryDef>
                                <defName>DZ_Decor</defName>
                                <label>Decor</label>
                                <description>Beautify your base.</description>
                                <order>460</order>
                                <specialDesignatorClasses>
                                    <li>Designator_Cancel</li>
                                    <li>Designator_Deconstruct</li>
                                    <li>Designator_Uninstall</li>
                                </specialDesignatorClasses>
                            </DesignationCategoryDef>

                        </value>
                    </Operation>


                    <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                        <xpath>/Defs/ThingDef[
                    @Name="SteleBase" or
                    defName="PlantPot"
                    ]</xpath>
                        <value>
                            <designationCategory>DZ_Decor</designationCategory>
                        </value>
                    </Operation>

                    <Operation Class="XmlExtensions.PatchOperationAddOrReplace" MayRequire="ludeon.rimworld.ideology">
                        <xpath>/Defs/ThingDef[
                    defName="Drape"
                    ]</xpath>
                        <value>
                            <designationCategory>DZ_Decor</designationCategory>
                        </value>
                    </Operation>

                    <Operation Class="PatchOperationFindMod">
                        <mods>
                            <li>Door Mat</li>
                            <li>[SYR] Doormats</li>
                        </mods>
                        <match Class="PatchOperationSequence">
                            <operations>
                                <li Class="PatchOperationReplace">
                                    <xpath>/Defs/ThingDef[@Name="LT_MatBase" or @Name="DoorMatBase"]/designationCategory</xpath>
                                    <value>
                                        <designationCategory>DZ_Decor</designationCategory>
                                    </value>
                                </li>
                            </operations>
                        </match>
                    </Operation>

                    <Operation Class="PatchOperationFindMod">
                        <mods>
                            <li>Fantastic Decor</li>
                        </mods>
                        <match Class="PatchOperationReplace">
                            <xpath>/Defs/ThingDef[defName="Bonzai" or defName="BonzaiTree" or defName="BonzaiFlower" or defName="Ferris" or defName="MiniBirch" or defName="MiniBroach" or defName="MiniMangrove" or defName="MiniMuhly" or defName="MiniPine" or defName="MiniPoplar" or defName="MiniSaguaro"]/designationCategory</xpath>
                            <value>
                                <designationCategory>DZ_Decor</designationCategory>
                            </value>
                        </match>
                    </Operation>

                    <!--Move items to Decor and Lighting tab-->
                    <Operation Class="PatchOperationFindMod">
                        <mods>
                            <li>[ELIF] Flooring and Decorative Options</li>
                        </mods>
                        <match Class="PatchOperationSequence">
                            <success>Always</success>
                            <operations>
                                <li Class="PatchOperationReplace">
                                    <xpath>/Defs/ThingDef[@Name="ELIF_Banner_Base" or @Name="ELIF_FloorDeco_Base" or @Name="ELIF_TableDeco_Base"]/designationCategory</xpath>
                                    <value>
                                        <designationCategory>DZ_Decor</designationCategory>
                                    </value>
                                </li>
                            </operations>
                        </match>
                    </Operation>

                    <!--Move items to Decor and Lighting tab-->
                    <Operation Class="PatchOperationFindMod">
                        <mods>
                            <li>Genetic Rim</li>
                        </mods>
                        <match Class="PatchOperationSequence">
                            <success>Always</success>
                            <operations>
                                <li Class="PatchOperationAdd">
                                    <xpath>/Defs/ThingDef[defName="GR_HugeBearRug" or defName="GR_HugeBearCatRug" or defName="GR_WolfRug" or defName="GR_MuffaloRug" or defName="GR_BoarTuskStatuette"]</xpath>
                                    <value>
                                        <designationCategory>DZ_Decor</designationCategory>
                                    </value>
                                </li>
                            </operations>
                        </match>
                    </Operation>

                    <Operation Class="PatchOperationFindMod">
                        <mods>
                            <li>GloomyFurniture</li>
                        </mods>
                        <match Class="PatchOperationReplace">
                            <xpath>/Defs/ThingDef//designationCategory[text()="OldStyleDeco"]</xpath>
                            <value>
                                <designationCategory>DZ_Decor</designationCategory>
                            </value>
                        </match>
                    </Operation>

                    <!--Move items to Decor, Furniture, and Lighting tab.-->
                    <Operation Class="PatchOperationFindMod">
                        <mods>
                            <li>More Furniture [1.1 + 1.2]</li>
                        </mods>
                        <match Class="PatchOperationSequence">
                            <success>Always</success>
                            <operations>
                                <!--Move all plant pots to decor category-->
                                <li Class="PatchOperationReplace">
                                    <xpath>/Defs/ThingDef[defName="Anon2SquarePlantPot" or defName="Anon2PlantSpot"]/designationCategory</xpath>
                                    <value>
                                        <designationCategory>DZ_Decor</designationCategory>
                                    </value>
                                </li>
                            </operations>
                        </match>
                    </Operation>


                    <!--Move items to Decor tab-->
                    <Operation Class="PatchOperationFindMod">
                        <mods>
                            <li>Neon Rim: The Rimworld Signs Pack</li>
                        </mods>
                        <match Class="PatchOperationSequence">
                            <success>Always</success>
                            <operations>
                                <li Class="PatchOperationReplace">
                                    <xpath>/Defs/ThingDef[@Name="Armorysignbase" or @Name="BARsignbase" or @Name="Femalesignbase" or @Name="Malesignbase" or @Name="OPENsignbase" or @Name="PLUSsignbase"]/designationCategory</xpath>
                                    <value>
                                        <designationCategory>DZ_Decor</designationCategory>
                                    </value>
                                </li>
                            </operations>
                        </match>
                    </Operation>

                    <Operation Class="PatchOperationFindMod">
                        <mods>
                            <li>RIMkea</li>
                        </mods>
                        <match Class="PatchOperationSequence">
                            <success>Always</success>
                            <operations>

                                <li Class="PatchOperationAdd">
                                    <xpath>/Defs/ThingDef[defName="BLUMTASK" or defName="POTBLUM" or defName="RUGUN" or defName="RUGDWA" or defName="FUTSTENTRug" or defName="STEPFUTRug" or defName="RUGTRE" or defName="RUGFIR" or defName="HOISTEPRug" or defName="MISKANTAARug" or defName="MATIPESSIRug" or defName="aFLIKFUTRug"]</xpath>
                                    <value>
                                        <designationCategory>DZ_Decor</designationCategory>
                                    </value>
                                </li>
                            </operations>


                        </match>
                    </Operation>

                    <!--Move items to Animals, Beds, Decor, Furniture, Husbandry, Security, and Structure tab. With redundant removals. #animalbeds-->
                    <Operation Class="PatchOperationFindMod">
                        <mods>
                            <li>RimPlas</li>
                            <li>RimPlas (Continued)</li>
                        </mods>
                        <match Class="PatchOperationSequence">
                            <success>Always</success>
                            <operations>

                                <li Class="XmlExtensions.PatchOperationAddOrReplace">
                                    <xpath>/Defs/ThingDef[defName="RimPlas_PlantPot"]</xpath>
                                    <value>
                                        <designationCategory>DZ_Decor</designationCategory>
                                    </value>
                                </li>
                            </operations>
                        </match>
                    </Operation>

                    <!--Move items to Decor tab-->
                    <Operation Class="PatchOperationFindMod">
                        <mods>
                            <li>Vanilla Furniture Expanded - Props and Decor</li>
                        </mods>
                        <match Class="PatchOperationSequence">
                            <success>Always</success>
                            <operations>
                                <li Class="PatchOperationReplace">
                                    <xpath>/Defs/ThingDef[@Name="DecalBase" or @ParentName="BuildingBase" or @ParentName="FurnitureBase"]/designationCategory[text()="PropsandDecor"]</xpath>
                                    <value>
                                        <designationCategory>DZ_Decor</designationCategory>
                                    </value>
                                </li>
                            </operations>
                        </match>
                    </Operation>


                    <!--Move items to Decor, Floors, Lighting tab-->
                    <Operation Class="PatchOperationFindMod">
                        <mods>
                            <li>Zen Garden</li>
                        </mods>
                        <match Class="PatchOperationSequence">
                            <success>Always</success>
                            <operations>
                                <li Class="PatchOperationReplace">
                                    <xpath>/Defs/ThingDef[@Name="ZenBase" or @Name="RakedBase" or defName="ZEN_FlowerArch"]/designationCategory</xpath>
                                    <value>
                                        <designationCategory>DZ_Decor</designationCategory>
                                    </value>
                                </li>
                            </operations>
                        </match>
                    </Operation>


                </caseTrue>
                <caseFalse />
            </Operation>
        </caseTrue>
        <caseFalse />
    </Operation>


</Patch>